!function(){"use strict";window.addEventListener("DOMContentLoaded",(()=>{(function(){class e{constructor(e,t,o,a){this.img=e,this.alt=t,this.title=o,this.parent=document.querySelector(a);for(var r=arguments.length,n=new Array(r>4?r-4:0),s=4;s<r;s++)n[s-4]=arguments[s];this.classes=n}render(){const e=document.createElement("div");0===this.classes.length?(this.element="catalog__item",e.classList.add(this.element)):this.classes.forEach((t=>e.classList.add(t))),e.innerHTML=`\n\t\t\t\t\t<img src="${this.img}" alt="${this.alt}">\n\t\t\t\t\t<div class="catalog__header">${this.title}</div>\n\t\t\t`,this.parent.append(e)}}new e("img/engine.jpg","engine","Двигатель",".catalog .catalog__wrapper").render(),new e("img/transmission.png","transmossion","Трансмиссия",".catalog .catalog__wrapper").render(),new e("img/car.jpg","car","Кузов",".catalog .catalog__wrapper").render(),new e("img/suspension.jpg","suspension","Подвеска",".catalog .catalog__wrapper").render(),new e("img/steering.jpg","steering","Рулевое управление",".catalog .catalog__wrapper").render(),new e("img/generator.jpg","generator","Электрооборудование",".catalog .catalog__wrapper").render(),new e("img/headlight.png","light","Оптика",".catalog .catalog__wrapper").render(),new e("img/signal.png","signal","Стоп-сигнал",".catalog .catalog__wrapper").render(),new e("img/radiator.jpg","radiator","Система охлаждения",".catalog .catalog__wrapper").render(),new e("img/wheels.jpg","wheels","шины и диски",".catalog .catalog__wrapper").render(),new e("img/glass.jpg","glass","стекла",".catalog .catalog__wrapper").render(),(async e=>{const t=await fetch("http://localhost:3000/menu",{});if(!t.ok)throw new Error;return await t.json()})().then((t=>{t.forEach((t=>{let{img:o,alt:a,title:r}=t;new e(o,a,r,".catalog .catalog__wrapper").render()}))}))})(),function(){function e(e){const t=document.querySelector(".modal");t.classList.add("hide"),document.querySelector(".overlay").classList.add("show"),document.body.style.overflow="hidden";const o=document.createElement("div");o.classList.add("form__modal"),o.innerHTML=`\n\t\t\t<div class="form__modal-subtitle">${e}</div>\n\t\t`,document.querySelector(".overlay").append(o),setTimeout((()=>{o.remove(),t.classList.add("show"),t.classList.remove("hide"),document.querySelector(".overlay").classList.remove("show"),document.body.style.overflow=""}),4e3)}document.querySelectorAll("form").forEach((t=>{var o;(o=t).addEventListener("submit",(t=>{t.preventDefault();let a=document.createElement("div");a.classList.add("status"),a.textContent="Загрузка...",o.appendChild(a);const r=new FormData(o);(async(e,t)=>{const o=await fetch("http://localhost:3000/requests",{method:"POST",headers:{"Content-type":"application/json"},body:t});return await o.json()})(0,JSON.stringify(Object.fromEntries(r.entries()))).then((t=>{console.log(t),e("Спасибо! Скоро мы с вами свяжемся"),a.remove()})).catch((()=>{e("Что-то пошло не так...")})).finally((()=>{o.reset()}))}))}))}(),function(e,t,o){const a=document.querySelectorAll(e),r=document.querySelector(o),n=document.querySelector(t),s=()=>{n.classList.add("show","fade"),document.body.style.overflow="hidden"},l=()=>{n.classList.remove("show","fade"),document.body.style.overflow=""};a.forEach((e=>{e.addEventListener("click",(()=>{s(),clearInterval(c)}))})),r.addEventListener("click",(e=>{l()})),n.addEventListener("click",(e=>{e.target===n&&l()})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&n.classList.contains("show")&&n.classList.remove("show")}));const c=setTimeout(s,4e3),d=()=>{window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(s(),clearInterval(c),window.removeEventListener("scroll",d))};window.addEventListener("scroll",d)}("[data-modal]",".overlay","[data-close]"),function(e){let{wrapper:t,slide:o,prevArrow:a,nextArrow:r,totalCounter:n,currentCounter:s}=e;const l=document.querySelectorAll(o),c=document.querySelector(t),d=document.querySelector(a),i=document.querySelector(r),g=document.querySelector(n),u=document.querySelector(s);let m=1;function p(){m>l.length&&(m=1),m<1&&(m=l.length),l.length<10?u.textContent=`0${m}`:u.textContent=m,l.forEach((e=>{e.classList.add("hide"),e.classList.remove("show","fade")})),l[m-1].classList.add("show","fade"),l[m-1].classList.remove("hide")}l.length<10?g.textContent=`0${l.length}`:g.textContent=l.length,p();const h=document.createElement("ol"),w=[];h.classList.add("carousel-indicators"),c.append(h);for(let e=0;e<l.length;e++){const t=document.createElement("li");t.setAttribute("data-slide-to",e+1),t.classList.add("dot"),0==e&&(t.style.backgroundColor="#FFA500",t.style.opacity=1),h.append(t),w.push(t)}function y(){w[m-1].style.opacity=1,w[m-1].style.backgroundColor="#FFA500"}i.addEventListener("click",(()=>{p(m+=1),w.forEach((e=>{e.style.opacity=.5,e.style.backgroundColor="#fff"})),y()})),d.addEventListener("click",(()=>{p(m-=1),w.forEach((e=>{e.style.opacity=.5,e.style.backgroundColor="#fff"})),y(),p()})),w.forEach((e=>{e.addEventListener("click",(t=>{e=t.target.getAttribute("data-slide-to"),m=e,w.forEach((e=>{e.style.opacity=.5,e.style.backgroundColor="#fff"})),y(),p()}))}))}({wrapper:".carousel__slider",slide:".carousel__slide",prevArrow:".carousel__slider-prev",nextArrow:".carousel__slider-next",totalCounter:"#total",currentCounter:"#current"})}))}();
//# sourceMappingURL=bundle.js.map